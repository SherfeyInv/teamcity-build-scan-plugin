plugins {
    id 'base'
}

task buildExtension(type: Exec) {
    inputs.file('pom.xml')
    inputs.dir('src/main')
    outputs.file('target/service-message-maven-extension-1.0.jar')

    commandLine './mvnw', 'clean', 'package'
}

configurations {
    mvnExtension {
        canBeConsumed = true
        canBeResolved = false
    }
}

artifacts {
    mvnExtension(buildExtension.outputs.files.singleFile) {
        builtBy buildExtension
    }
}
